<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ainannan.tool.dj.mapper.DjMapper">
	
	<resultMap id="songListMap" type="cn.ainannan.tool.dj.bean.Song">
        <id column="id" jdbcType="VARCHAR" property="id" />
        <result column="name" jdbcType="VARCHAR" property="name" />
        <result column="singer" jdbcType="VARCHAR" property="singer" />
    </resultMap>
	
	<resultMap id="Map2" type="cn.ainannan.tool.dj.bean.Dj">
		<id column="id" jdbcType="VARCHAR" property="id" />
        <result column="name" jdbcType="VARCHAR" property="name" />
        <collection property="songList" resultMap="songListMap" columnPrefix="sub_">
        </collection>
    </resultMap>
	
    <select id="listWithChildren" resultMap="Map2">
        SELECT
			a.id,
			a. NAME,
			s.id AS "sub_id",
			s. NAME AS "sub_name",
			s.singer AS "sub_singer"
		FROM
			dj a
		LEFT JOIN dj_song s ON a.id = s.dj_id
		WHERE
			a.del_flag = '0'
		AND s.id IS NOT NULL
    </select>

	<select id="list" resultType="Dj">

	</select>
	
</mapper>