<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ainannan.tool.fileSort.mapper.FileSortMapper">
	<sql id="column_List" >
        a.id as "id",
        a.path as "path",
        a.name as "name",
        a.md5 as "md5",
        a.suffix as "suffix",
        a.size as "size",
        a.create_by as "createBy",
        a.create_date as "createDate",
        a.del_flag as "delFlag",
		a.type as "type"
    </sql>

	<sql id="left_join_include">
	</sql>

	<sql id="where_List">
		a.del_flag = #{DEL_FLAG_NORMAL}
		<if test="md5 != null and md5 != ''">
			and a.md5 = #{md5}
		</if>
		<if test="suffix != null and suffix != ''">
			and a.suffix = #{suffix}
		</if>
		<if test="type != null and type != ''">
			and a.type = #{type}
		</if>
		<if test="name != null and name != ''">
			and a.name like '%' || #{name} || '%'
		</if>
	</sql>

	<select id="getMd5Str" parameterType="String" resultType="java.lang.String">
		SELECT GROUP_CONCAT(a. md5) FROM file_sort_list a
	</select>

	<insert id="insertByList" parameterType="java.util.List">
		INSERT INTO file_sort_list(
		id,
		path,
		name,
		md5,
		suffix,
		size,
		create_by,
		create_date,
		del_flag,
		type
		)
		<foreach collection="list" item="entity"
				 separator=" union all ">
			SELECT
			#{entity.id},
			#{entity.path},
			#{entity.name},
			#{entity.md5},
			#{entity.suffix},
			#{entity.size},
			#{entity.createBy},
			#{entity.createDate},
			#{entity.delFlag},
			#{entity.type}

		</foreach>
	</insert>
</mapper>